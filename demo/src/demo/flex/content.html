<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>伪锚点</title>
    <style>
        .anchor1, .anchor2{width:100px;height:100px;}
        .anchor1{background:red;}
        .anchor2{background:green;}
        .spacing1, .spacing2{height:200px;}
        .spacing1{background:yellow;}
        .spacing2{background:gray;}

        .anchor2 {
          transiton: all 1s ease-out;
        }
    </style>
  </head>
  <body>
    <p>
      <a href="#w_anchor1">锚点1</a>
    </p>
    <p>
      <a href="#w_anchor2">锚点2</a>
    </p>
    <p class="spacing1">间隔1</p>
    <p class="spacing2">间隔2</p>
    <p class="spacing1">间隔3</p>
    <p class="spacing2">间隔4</p>
    <p class="spacing1">间隔5</p>
    <p class="spacing2">间隔6</p>
    <p class="spacing1">间隔7</p>
    <p class="spacing2">间隔8</p>

    <div id="w_anchor1" class="anchor1">锚点1</div>

    <p class="spacing1">间隔1</p>
    <p class="spacing2">间隔2</p>
    <p class="spacing1">间隔3</p>
    <p class="spacing2">间隔4</p>
    <p class="spacing1">间隔5</p>
    <p class="spacing2">间隔6</p>
    <p class="spacing1">间隔7</p>
    <p class="spacing2">间隔8</p>

    <div id="w_anchor2" class="anchor2">锚点2</div>

    <p class="spacing1">间隔1</p>
    <p class="spacing2">间隔2</p>
    <p class="spacing1">间隔3</p>
    <p class="spacing2">间隔4</p>
    <p class="spacing1">间隔5</p>
    <p class="spacing2">间隔6</p>
    <p class="spacing1">间隔7</p>
    <p class="spacing2">间隔8</p>
  </body>
  <script>
function scroll (currentY, targetY) {
  // 计算需要移动的距离
  let needScrollTop = targetY - currentY
  let _currentY = currentY
  setTimeout(() => {
    // 一次调用滑动帧数，每次调用会不一样
    const dist = Math.ceil(needScrollTop / 10)
    _currentY += dist
    window.scrollTo(_currentY, currentY)
    // 如果移动幅度小于十个像素，直接移动，否则递归调用，实现动画效果
    if (needScrollTop > 10 || needScrollTop < -10) {
      scroll(_currentY, targetY)
    } else {
      window.scrollTo(_currentY, targetY)
    }
  }, 100)
}

function test (id) {
  const scrollHeight = document.getElementById(id).offsetTop
  const currentY = document.documentElement.scrollTop || document.body.scrollTop
  scroll(scrollHeight, currentY)
  // acroll(currentY, scrollHeight)
}
var dom = document.getElementById('w_anchor2')
dom.onclick = function () {debugger
  test('w_anchor2')
}

</script>
</html>
